# TIL: servlet
**학습날짜: 2025년 02월 17일**

**어떤 문제가 있었는지?**  
저번시간에 배운 servlet을 복습했음.  
이후 mybatis와 함께 사용해서 도서 검색 프로그램을 만드는 실습 문제를 진행함.  

**그 문제를 해결하기 위해 시도해본 것들**  
복습하는 과정에서 더 자세히 설명해주셔서 servlet에 대해서 이해도가 높아졌었음.
servlet을 설명해 주시면서 get, post에 대해서도 설명해주셨음.  

notion에 정리한 수업 내용을 첨부함.  


```
- client side
    - web client(web browser) ⇒ chrome
- server side
    - Tomcat
        - web server
        - web application server(was)
    

- tomcat
    - Tomcat을 이용해서 Deploy를 할 수 있어요! (이 때 application context를 수정해서 사용할 수 있어요!!)
    - Servlet이라고 불리는 Java program을 작성해서 web client가 호출해서 그 결과를 browser를 통해서 받아볼려면 어떻게 해야 하나요?
        - Servlet은 interface에요! 이 Servlet interface를 직접적으로 구현하는게 아니라 Servlet - GenericServlet class - HttpServlet class가 있어요! 이 HttpServlet을 상속해서 우리는 Servlet을 구현해요!
        - 상속되는 method가 있어요!!
            - init(): 서블릿 객체가 생성될 때 호출되는 초기화를 담당하는 메소드. (생성자 대신 init()를 이용해서 초기화를 진행)
            - service() : 클라이언트가 서블릿을 실행할 때 호출되는 method. 이 service는 이미 하는 일이 구현되어 있어요! 우리가 일반적으로 overriding 하지 않아요! 이 메소드는 클라이언트의 요청이 GET방식이면 doGet()을 호출하고 만약 POST 방식이면 doPost()를 호출하는 것으로 구현이 되어 있어요! 클라이언트가 서버쪽 프로그램을 호출할 때 2가지 방식이 있어요! GET, POST 방식이 존재.
            - doGet(), doPost(): 이 두개의 method를 overriding해서 클라이언트가 원하는 작업을 수행하면 돼요!
            - destroy(): servlet instance가 WAS에서 삭제될 때 수행되는 method. ⇒ 사용하고 있는 여러 resource들을 해제해야 해요!
    - 클라이언트가 GET방식으로 Servlet을 호출했을 때 간단하게 response를 전송하는 Servlet을 실제로 구현!
        - 클라이언트가 서블릿을 호출하는 방법을 제공해야 해요. 쉽게 말하면, Servlet에 논리적인 이름을 하나 부여해서 그걸 클라이언트가 이용해서 Servlet을 호출할 수 있도록 해야 해요!
            - xml 파일을 이용해서 그 설정을 잡을 수 있어요! XML을 이용하기 때문에 번거로워요! 하지만 전체적인 이름관리를 하나의 파일에서 할 수 있어서 관리면에서는 좋아요!
            - annotation을 이용해서 이름을 설정할 수 있어요! 이게 일반적인 방식이에요! 직관적으로 사용할 수 있어서 훨씬 선호해요!

=================================================================

여기까지가 Servlet을 구현하고 Get방식으로 client가 호출하려면 어떻게 해야 하는지에 대한 내용이예요!

doGet()에서 클라리언트에게 내용을 전달하려면 어떻게 해야 하나요?

PrintWriter를 이용해서 클라이언트에게 데이터 연결 통로를 열고 그 통로를 통해서 데이터를 전달하면 돼요! (contenttype을 잘 설정해야 해요!)

=================================================================

여기까지가 서블릿을 호출하고 단순 텍스트를 서블릿으로부터 클라이언트가 전송받는 과정이예요!

추가적으로 알아봐야하는건… 클라이언트가 서블릿에게 데이터를 전달하려면 어떻게 해야 하나요?

데이터를 전달할 때는 2가지 방식으로 나누어서 살펴봐야 해요!

1. GET방식

⇒ Query String을 이용해서 데이터를 전달하는 방식을 사용

     Query String은 특수한 형식을 가진 문자열이예요!

     ?변수 = 값&변수=값&변수=값   ⇒ ?name=홍길동&age=20&address=서울

사용예)

[http://localhost:8080/HelloServletProject_war_exploded/](http://localhost:8080/HelloServeletProject/)myServlet?name=홍길동&age=20&address=서울

서버쪽(서블릿)에서는 전달된 데이터를 받아야 해요 ⇒ getParameter(”변수명”)

그런데 이 방식(데이터를 전달하는 방식)은 약간의 문제가 있어요!

- 보안성이 전혀 없어요(128 bit 암호화를 이용해서 처리해야 해요!)
- URL의 길이제한이 있기 때문에 길이가 긴 데이터를 전달하기가 힘들어요!

1. POST 방식
    - 보안성이 약간 있어요! (브라우져 주소창에 변수와 값에 대한 내용이 표현되지 않아요!)
    - request header에 포함되어서 데이터가 전달되기 때문에 길이의 제한이 없어요!
    - HTML의 특수한 태그를 이용해서 서버쪽 프로그램(서블릿)을 호출하는 구조예요!
    - 클라이언트에게 보여줄 HTML을 하나 만들꺼예요! (입력양식을 표현하는 HTML을 작성)
```



**어떻게 그 문제를 해결했는지**  
servlet을 통해서 서비스를 구현하는 것 까지는 어렵지 않게 진행함.  
문제는 mybatis를 연동하는 과정에서 기존과는 조금 다른 부분이 있었음.  
버젼이 달라지면서 오라클을 연동하는 driver의 주소구조가 좀 달라졌는데 그 부분에서 좀 오랜 시간 헤맴.  
하지만 결국 에러코드를 따라가면서 구글링과 함께 해결했음.  


**오늘 내가 새롭게 배운 것들**  
servlet과 mybatis를 통해 그럴듯한 도서 검색 웹 서비스를 만들었는데 꽤 재밋는 경험이엇음.  
