
Book
```
package booksearch.vo;

public class Book {
    private String bisbn;
    private String btitle;
    private int bprice;
    private String bauthor;

    public Book() {

    }

    public Book(String bisbn, String btitle, int bprice, String bauthor) {
        this.bisbn = bisbn;
        this.btitle = btitle;
        this.bprice = bprice;
        this.bauthor = bauthor;
    }

    public String getBisbn() {
        return bisbn;
    }

    public String getBtitle() {
        return btitle;
    }

    public int getBprice() {
        return bprice;
    }

    public String getBauthor() {
        return bauthor;
    }

    public void setBisbn(String bisbn) {
        this.bisbn = bisbn;
    }

    public void setBtitle(String btitle) {
        this.btitle = btitle;
    }

    public void setBprice(int bprice) {
        this.bprice = bprice;
    }

    public void setBauthor(String bauthor) {
        this.bauthor = bauthor;
    }
}

```

JavaFXTableViewController
```
package booksearch;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;

import booksearch.vo.Book;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.MouseButton;

import java.net.URL;
import java.sql.*;
import java.util.ResourceBundle;

public class JavaFXTableViewController implements Initializable {

    @FXML
    private TableView<Book> tableView;


    @FXML private TextField textField;
    @FXML
    private Button searchBtn;
    @FXML private TableColumn<Book, String> isbnCol;
    @FXML private TableColumn<Book, String> titleCol;
    @FXML private TableColumn<Book, Integer> priceCol;
    @FXML private TableColumn<Book, String> authorCol;

    private Connection con;

    public JavaFXTableViewController() {
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            String id = "C##DEV";
            String pw = "1234";
            String JDBC_URL = "jdbc:oracle:thin:@localhost:1521:XE";
            con = DriverManager.getConnection(JDBC_URL, id, pw);
            System.out.println("데이터베이스 연결 성공!");
        } catch (Exception e) {
            e.printStackTrace();
//            System.out.println(e);
        }
    }

    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        // FXML이 load될 때 메소드가 호출!
        // 버튼이 클릭되면 TableView에 데이터를 넣어야 해요!
        isbnCol.setCellValueFactory(new PropertyValueFactory<>("bisbn"));
        titleCol.setCellValueFactory(new PropertyValueFactory<>("btitle"));
        priceCol.setCellValueFactory(new PropertyValueFactory<>("bprice"));
        authorCol.setCellValueFactory(new PropertyValueFactory<>("bauthor"));



        ContextMenu contextMenu = new ContextMenu();
        MenuItem deleteItem = new MenuItem("삭제");
        contextMenu.getItems().add(deleteItem);

//        tableView.setRowFactory(tv -> {
//            TableRow<Book> row = new TableRow<>();
//            row.setOnMouseClicked(event -> {
//                if (event.getButton() == MouseButton.SECONDARY && !row.isEmpty()) {
//                    contextMenu.show(row, event.getScreenX(), event.getScreenY());
//                }
//            });
//            return row;
//        });


        ObservableList<Book> books =
                FXCollections.observableArrayList();

        tableView.setRowFactory(tv -> {
            TableRow<Book> row = new TableRow<>();
            row.setOnMouseClicked(event -> {
                if (event.getButton() == MouseButton.PRIMARY && event.getClickCount() == 2 && !row.isEmpty()) {
                    Book selectedBook = row.getItem();
                    TextInputDialog dialog = new TextInputDialog(String.valueOf(selectedBook.getBprice()));
                    dialog.setTitle("가격 수정");
                    dialog.setHeaderText(selectedBook.getBtitle() + "의 가격을 수정하세요.");
                    dialog.setContentText("새로운 가격을 입력하세요:");

                    dialog.showAndWait().ifPresent(newPrice -> {
                        try {
                            int price = Integer.parseInt(newPrice);

                            // 데이터베이스 업데이트
                            String sql = "UPDATE book SET bprice = ? WHERE bisbn = ?";
                            try (PreparedStatement pstmt = con.prepareStatement(sql)) {
                                pstmt.setInt(1, price);
                                pstmt.setString(2, selectedBook.getBisbn());
                                pstmt.executeUpdate();
                                System.out.println("가격 수정 성공!");
                            } catch (SQLException e) {
                                e.printStackTrace();
                            }

                            // TableView 업데이트
                            selectedBook.setBprice(price);
                            tableView.refresh();  // 변경된 데이터를 TableView에 반영
                        } catch (NumberFormatException e) {
                            e.printStackTrace();
                        }
                    });
                    event.consume();
                }
                else if (event.getButton() == MouseButton.SECONDARY && !row.isEmpty()) {
                    contextMenu.show(row, event.getScreenX(), event.getScreenY());
                }
            });
            return row;
        });


        searchBtn.setOnAction(event -> {


            String sql = "SELECT bisbn, btitle, bprice, bauthor FROM book WHERE btitle LIKE ?";
            try {
                PreparedStatement pstmt = con.prepareStatement(sql);
                pstmt.setString(1, "%" + textField.getText() + "%");
                ResultSet rs = pstmt.executeQuery();
                while(rs.next()) {
                    Book book = new Book(rs.getString("bisbn"),
                            rs.getString("btitle"),
                            rs.getInt("bprice"),
                            rs.getString("bauthor"));
                    books.add(book);
                }

            } catch (Exception e2) {
                e2.printStackTrace();
            }

            tableView.setItems(books);
        });

        deleteItem.setOnAction(event -> {
            Book selectedBook = tableView.getSelectionModel().getSelectedItem();
            if (selectedBook != null) {
                String sql = "DELETE FROM book WHERE bisbn = ?";
                try {
                    PreparedStatement pstmt = con.prepareStatement(sql);
                    pstmt.setString(1, selectedBook.getBisbn());
                    pstmt.executeUpdate();
                    System.out.println("도서 삭제 성공: " + selectedBook.getBtitle());
                } catch (Exception e) {
                    e.printStackTrace();
                }
                books.remove(selectedBook);
            }
        });

    }
}

```


JavaFXTableViewEx
```
package booksearch;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class JavaFXTableViewEx extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        // 화면 구성
        // 화면 구성을 FXML을 이용해서 할 꺼에요!
        Parent root = null;
//                FXMLLoader.load(getClass().getResource("tableviewexample.fxml"));

        FXMLLoader loader =
                new FXMLLoader(getClass().getResource("tableviewexample.fxml"));

        try {
            root = loader.load();
        } catch(Exception e) {
            e.printStackTrace();
        }

        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```

tableviewexample.fxml
```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.text.Font?>


<BorderPane fx:controller="booksearch.JavaFXTableViewController" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1">
   <center>
      <TableView fx:id="tableView" prefHeight="200.0" prefWidth="200.0" BorderPane.alignment="CENTER">
        <columns>
          <TableColumn fx:id="isbnCol" prefWidth="147.0" text="책 ISBN" />
          <TableColumn fx:id="titleCol" prefWidth="160.5" text="책 제목" />
            <TableColumn fx:id="priceCol" prefWidth="172.0" text="책 가격" />
            <TableColumn fx:id="authorCol" prefWidth="113.0" text="책 저자" />
        </columns>
      </TableView>
   </center>
   <bottom>
      <FlowPane prefHeight="87.0" prefWidth="600.0" BorderPane.alignment="CENTER">
         <children>
            <Label text="검색어">
               <font>
                  <Font size="18.0" />
               </font>
               <FlowPane.margin>
                  <Insets left="20.0" top="30.0" />
               </FlowPane.margin>
            </Label>
            <TextField fx:id="textField">
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
            </TextField>
            <Button fx:id="searchBtn" mnemonicParsing="false" text="검색">
               <font>
                  <Font size="18.0" />
               </font>
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
            </Button>
         </children>
      </FlowPane>
   </bottom>
</BorderPane>

```
