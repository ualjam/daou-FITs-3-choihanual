controller-BookSearchMVCController
```
package booksearchmvc.controller;

import booksearch.vo.Book;
import booksearchmvc.service.BookSearchMVCService;
import booksearchmvc.vo.BookVO;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.MouseButton;

//import java.awt.*;
import java.net.URL;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.ResourceBundle;

public class BookSearchMVCController implements Initializable {

    // 이벤트 처리를 등록하려면 당연히 View에 있는 control들에 대한
    // reference가 있어야 해요!
    @FXML private TextField textField;
    @FXML private Button searchBtn;
    @FXML private Button deleteBtn;
    @FXML private TableView<BookVO> tableView;
    @FXML private TableColumn<BookVO, String> isbnCol;
    @FXML private TableColumn<BookVO, String> titleCol;
    @FXML private TableColumn<BookVO, Integer> priceCol;
    @FXML private TableColumn<BookVO, String> authorCol;

    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        // View의 controls(버튼 같은..)에 대한 이벤트를 등록!!
        isbnCol.setCellValueFactory(new PropertyValueFactory<>("bisbn"));
        titleCol.setCellValueFactory(new PropertyValueFactory<>("btitle"));
        priceCol.setCellValueFactory(new PropertyValueFactory<>("bprice"));
        authorCol.setCellValueFactory(new PropertyValueFactory<>("bauthor"));



        searchBtn.setOnAction(event -> {
            // 검색 버튼이 클릭되면 키워드를 이용한 검색 작업을 진행
            // 로직처리하기 위해서 Service객체가 있어야 해요!
            BookSearchMVCService service =
                    new BookSearchMVCService();

            ObservableList<BookVO> list =
                    service.searchBookByKeyword(textField.getText());

            tableView.setItems(list);

        });

        tableView.setRowFactory(tv-> {
            BookSearchMVCService service =
                    new BookSearchMVCService();
            TableRow<BookVO> row = new TableRow<>();
            row.setOnMouseClicked(event -> {
                if (event.getButton() == MouseButton.PRIMARY && event.getClickCount() == 2 && !row.isEmpty()) {
                    BookVO selectedBook = row.getItem();
                    TextInputDialog dialog = new TextInputDialog(String.valueOf(selectedBook.getBprice()));
                    dialog.setTitle("가격 수정");
                    dialog.setHeaderText(selectedBook.getBtitle() + "의 가격을 수정하세요.");
                    dialog.setContentText("새로운 가격을 입력하세요:");

                    dialog.showAndWait().ifPresent(newPrice -> {
                        int price = Integer.parseInt(newPrice);
                        service.updateBookPrice(selectedBook.getBisbn(), price);
                    });
                }
            });
            return row;
        });

        deleteBtn.setOnAction(event -> {
            BookSearchMVCService service =
                    new BookSearchMVCService();
            BookVO selectedBook = tableView.getSelectionModel().getSelectedItem();

            service.deleteBook(selectedBook.getBisbn());

        });
    }


}

```

dao-BookDAO
```
package booksearchmvc.dao;

import booksearchmvc.vo.BookVO;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import booksearchmvc.model.ConnectionMaker;

public class BookDAO {

    private ConnectionMaker connectionMaker;

    public BookDAO(ConnectionMaker connectionMaker) {
        // 직접 객체를 생성하는게 아니라
        // 객체를 injection 받아서 사용해요(DI - Dependency Injection)
        // 생성자 주입(생성자를 통해서 주입받았어요)
        this.connectionMaker = connectionMaker;
    }

    public ObservableList<BookVO> select(String text) {
        ObservableList<BookVO> books = FXCollections.observableArrayList();
        // Database 처리 6단계가 나오면 돼요!
        try {
            Connection con = connectionMaker.getConnection();
            String sql = "select bisbn, btitle, bprice, bauthor ";
            sql += " from book where btitle like ?";
            PreparedStatement ps = con.prepareStatement(sql);
            ps.setString(1, "%" + text + "%");
            ResultSet rs = ps.executeQuery();
            while (rs.next()) {
                BookVO book = new BookVO(rs.getString("bisbn"),
                        rs.getString("btitle"),
                        rs.getInt("bprice"),
                        rs.getString("bauthor"));
                books.add(book);
            }
            rs.close();
            ps.close();
            con.close();
        } catch(Exception e) {
            e.printStackTrace();
        }

        return books;
    }

    public void update(String bookId, Integer price) {
        try {
            Connection con = connectionMaker.getConnection();
            String sql = "UPDATE book SET bprice = ? WHERE bisbn = ?";
            PreparedStatement pstmt = con.prepareStatement(sql);
            pstmt.setInt(1, price);
            pstmt.setString(2, bookId);
            pstmt.executeUpdate();
            System.out.println("가격 수정 성공!");
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    public void delete(String bookId) {
        try {
            Connection con = connectionMaker.getConnection();
            String sql = "DELETE FROM book WHERE bisbn = ?";
            PreparedStatement pstmt = con.prepareStatement(sql);
            pstmt.setString(1, bookId);
            pstmt.executeUpdate();
            System.out.println("도서 삭제 성공");
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
}

```

model-ConnectionMaker
```
package booksearchmvc.model;

import java.sql.Connection;

public interface ConnectionMaker {

    public Connection getConnection() throws Exception;
}

```

model-KConnectionMaker
```
package booksearchmvc.model;

import booksearchmvc.model.ConnectionMaker;

import java.sql.Connection;
import java.sql.DriverManager;

public class KConnectionMaker implements ConnectionMaker {
    @Override
    public Connection getConnection() throws Exception {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        String url = "jdbc:oracle:thin:@localhost:1521:xe";
        String id = "C##DEV";
        String pw = "1234";
        Connection con = DriverManager.getConnection(url, id, pw);
        return con;
    }
}

```

service-BookSearchMVCService
```
package booksearchmvc.service;

import booksearchmvc.dao.BookDAO;
import booksearchmvc.model.ConnectionMaker;
import booksearchmvc.model.KConnectionMaker;
import booksearchmvc.vo.BookVO;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;

public class BookSearchMVCService {

    private BookDAO bookDAO;
    public BookSearchMVCService() {
        ConnectionMaker connectionMaker = new KConnectionMaker();
        this.bookDAO = new BookDAO(connectionMaker);
    }


    public ObservableList<BookVO> searchBookByKeyword(String text) {
        // 로직처리하면 돼요!!
        // 인자로 들어온 키워드를 이용해서 Database에서 관련된 책을 찾아서
        // 리스트로 만들어서 리턴!
        // DB처리를 해야 하네요... 그럼 DAO가 있어야 해요. DAO에게  DB처리를 위임.

        ObservableList<BookVO> result = null;
        result = bookDAO.select(text);
        return result;
    }

    public void updateBookPrice(String bookId, Integer price) {
        bookDAO.update(bookId, price);


    }

    public void deleteBook(String bookId) {
        bookDAO.delete(bookId);
    }
}

```

view-booksearchmvc.fxml
```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.text.Font?>


<BorderPane fx:controller="booksearchmvc.controller.BookSearchMVCController" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1">
   <center>
      <TableView fx:id="tableView" prefHeight="200.0" prefWidth="200.0" BorderPane.alignment="CENTER">
        <columns>
          <TableColumn fx:id="isbnCol" prefWidth="147.0" text="책 ISBN" />
          <TableColumn fx:id="titleCol" prefWidth="160.5" text="책 제목" />
            <TableColumn fx:id="priceCol" prefWidth="172.0" text="책 가격" />
            <TableColumn fx:id="authorCol" prefWidth="113.0" text="책 저자" />
        </columns>
      </TableView>
   </center>
   <bottom>
      <FlowPane prefHeight="92.0" prefWidth="600.0" BorderPane.alignment="CENTER">
         <children>
            <Label text="검색어">
               <font>
                  <Font size="18.0" />
               </font>
               <FlowPane.margin>
                  <Insets left="20.0" top="30.0" />
               </FlowPane.margin>
            </Label>
            <TextField fx:id="textField">
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
            </TextField>
            <Button fx:id="searchBtn" mnemonicParsing="false" text="검색">
               <font>
                  <Font size="18.0" />
               </font>
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
            </Button>
            <Button fx:id="deleteBtn" mnemonicParsing="false" text="삭제">
               <FlowPane.margin>
                  <Insets left="30.0" top="30.0" />
               </FlowPane.margin>
               <font>
                  <Font size="18.0" />
               </font>
            </Button>
         </children>
      </FlowPane>
   </bottom>
</BorderPane>

```

view-BookSearchMVCView
```
package booksearchmvc.view;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.stage.Stage;
import javafx.scene.Scene;

public class BookSearchMVCView extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        // 화면 구성
        // Stage - Scene - Parent(Layout manager)
        Parent root = null;
        FXMLLoader loader =
                new FXMLLoader(getClass().getResource("booksearchmvc.fxml"));

        try {
            root = loader.load();
        } catch (Exception e) {
            e.printStackTrace();
        }
        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.setTitle("도서검색 MVC");

        stage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}

```

vo-BookVO
```
package booksearchmvc.vo;

public class BookVO {
    private String bisbn;
    private String btitle;
    private int bprice;
    private String bauthor;

    public BookVO() {
    }

    public BookVO(String bisbn, String btitle, int bprice, String bauthor) {
        this.bisbn = bisbn;
        this.btitle = btitle;
        this.bprice = bprice;
        this.bauthor = bauthor;
    }

    public String getBisbn() {
        return bisbn;
    }

    public void setBisbn(String bisbn) {
        this.bisbn = bisbn;
    }

    public String getBtitle() {
        return btitle;
    }

    public void setBtitle(String btitle) {
        this.btitle = btitle;
    }

    public int getBprice() {
        return bprice;
    }

    public void setBprice(int bprice) {
        this.bprice = bprice;
    }

    public String getBauthor() {
        return bauthor;
    }

    public void setBauthor(String bauthor) {
        this.bauthor = bauthor;
    }
}

```
